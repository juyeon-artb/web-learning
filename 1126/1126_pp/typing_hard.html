<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Typing Game Mode</title>

    <style>
      body {
        font-family: "Pretendard", sans-serif;
        background: linear-gradient(135deg, #8ea6ff, #b8c3ff);
        margin: 0;
        padding: 0;
        text-align: center;
        user-select: none;
      }

      .container {
        width: 90%;
        max-width: 650px;
        margin: 50px auto;
        background: #ffffffdd;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      }

      h1 {
        font-size: 32px;
        color: #3649ff;
        margin-bottom: 10px;
      }

      /* ÎÇúÏù¥ÎèÑ Î≤ÑÌäº */
      .mode-buttons {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-bottom: 25px;
      }
      .mode-btn {
        padding: 10px 18px;
        font-size: 16px;
        border-radius: 10px;
        border: none;
        background: #6c86ff;
        color: white;
        cursor: pointer;
        box-shadow: 0 3px 8px rgba(0, 0, 95, 0.2);
      }
      .mode-btn:hover {
        background: #5a74e6;
      }

      /* Î¨∏Ï†ú Î∞ïÏä§ */
      .quiz-box {
        font-size: 28px;
        font-weight: 700;
        padding: 20px;
        background: #e8ecff;
        border-radius: 15px;
        margin-bottom: 25px;
        min-height: 60px;
      }

      /* ÏûÖÎ†•Ï∞Ω */
      #answer-input {
        width: 85%;
        padding: 14px;
        font-size: 18px;
        border: 2px solid #8aa0ff;
        border-radius: 12px;
        outline: none;
        background: #f5f6ff;
      }

      #answer-input:focus {
        border-color: #4c64ff;
        box-shadow: 0 0 10px rgba(80, 100, 255, 0.4);
      }

      /* Ï†êÏàò/ÌÉÄÏù¥Î®∏/WPM */
      .info-box {
        margin-top: 20px;
        font-size: 19px;
        font-weight: 700;
        color: #333;
        display: flex;
        justify-content: space-around;
      }

      /* ÏßÑÌñâ Î∞î */
      .progress-container {
        width: 90%;
        max-width: 600px;
        margin: 20px auto;
        height: 15px;
        background: #d7d9ff;
        border-radius: 10px;
        overflow: hidden;
      }
      .progress-bar {
        width: 100%;
        height: 100%;
        background: #4c64ff;
        transition: width 0.2s;
      }

      /* Restart Î≤ÑÌäº */
      #restart-btn {
        margin-top: 25px;
        padding: 12px 22px;
        font-size: 18px;
        background: #5f73ff;
        color: white;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        display: none;
      }

      .keyboard {
        width: 90%;
        max-width: 600px;
        margin: 40px auto 0;
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        gap: 8px;
      }

      .key {
        padding: 12px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
        font-size: 17px;
        font-weight: 600;
        transition: 0.1s;
      }

      .key.active {
        background: #4b62ff;
        color: white;
        transform: scale(0.95);
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3) inset;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>üéÆ Typing Game Mode</h1>

      <div class="mode-buttons">
        <button class="mode-btn" onclick="setMode('easy')">Easy</button>
        <button class="mode-btn" onclick="setMode('normal')">Normal</button>
        <button class="mode-btn" onclick="setMode('hard')">Hard</button>
      </div>

      <div class="quiz-box" id="quiz-text">ÎÇúÏù¥ÎèÑÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.</div>

      <input
        type="text"
        id="answer-input"
        placeholder="EnterÎ°ú Ï†úÏ∂úÌïòÏÑ∏Ïöî!"
        disabled
      />

      <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>

      <div class="info-box">
        <div>‚è± Time: <span id="timer">60</span>s</div>
        <div>‚≠ê Score: <span id="score">0</span></div>
        <div>üî• WPM: <span id="wpm">0</span></div>
        <div>üèÜ High: <span id="high-score">0</span></div>
      </div>

      <button id="restart-btn" onclick="restartGame()">Restart</button>
    </div>

    <!-- ÌÇ§Î≥¥Îìú -->
    <div class="keyboard">
      <div class="key">q</div>
      <div class="key">w</div>
      <div class="key">e</div>
      <div class="key">r</div>
      <div class="key">t</div>
      <div class="key">y</div>
      <div class="key">u</div>
      <div class="key">i</div>
      <div class="key">o</div>
      <div class="key">p</div>

      <div class="key">a</div>
      <div class="key">s</div>
      <div class="key">d</div>
      <div class="key">f</div>
      <div class="key">g</div>
      <div class="key">h</div>
      <div class="key">j</div>
      <div class="key">k</div>
      <div class="key">l</div>
      <div class="key">;</div>

      <div class="key">z</div>
      <div class="key">x</div>
      <div class="key">c</div>
      <div class="key">v</div>
      <div class="key">b</div>
      <div class="key">n</div>
      <div class="key">m</div>
      <div class="key">,</div>
      <div class="key">.</div>
      <div class="key">/</div>
    </div>

    <script>
      /* Îã®Ïñ¥ Î¶¨Ïä§Ìä∏ (Ïù¥Ï†ÑÍ≥º ÎèôÏùº ‚Äî ÏÉùÎûµ) */
      const easyWords = [
        "apple",
        "banana",
        "orange",
        "grape",
        "water",
        "mouse",
        "computer",
        "school",
        "pretty",
        "hello",
        "world",
        "typing",
        "practice",
        "coffee",
        "happy",
        "winter",
        "summer",
        "keyboard",
        "teacher",
        "student",
        "house",
        "family",
        "phone",
        "music",
        "dog",
        "cat",
        "bread",
        "car",
        "book",
        "desk",
        "chair",
        "milk",
        "pizza",
        "friend",
        "smile",
        "light",
        "flower",
        "blue",
        "green",
        "yellow",
        "tree",
        "river",
        "snow",
        "rain",
        "cloud",
        "star",
        "earth",
        "game",
        "pencil",
        "paper",
      ];

      const normalWords = [
        "challenge",
        "library",
        "general",
        "history",
        "language",
        "picture",
        "memory",
        "science",
        "planet",
        "holiday",
        "important",
        "problem",
        "control",
        "energy",
        "message",
        "reason",
        "pattern",
        "moment",
        "future",
        "machine",
        "nature",
        "company",
        "experience",
        "favorite",
        "return",
        "increase",
        "suggestion",
        "comfortable",
        "difficult",
        "prepare",
        "character",
        "weather",
        "subject",
        "culture",
        "custom",
        "discovery",
        "solution",
        "activity",
        "balance",
        "calendar",
        "direction",
        "education",
        "library",
        "mountain",
        "improve",
        "protect",
        "recycle",
        "station",
        "journey",
        "develop",
      ];

      const hardSentences = [
        "The quick brown fox jumps over the lazy dog.",
        "Typing practice helps improve accuracy and speed.",
        "She wondered whether the mysterious message was meant for her.",
        "The scientist conducted experiments to support his hypothesis.",
        "Technology continues to evolve at an extraordinary pace.",
        "Success often requires patience, discipline, and consistent effort.",
        "The ancient manuscript contained secrets lost for centuries.",
        "Achieving goals requires clear focus and strong determination.",
        "Understanding complex ideas takes time and perseverance.",
        "He believed that knowledge was the key to solving any problem.",
        "The orchestra performed beautifully despite limited rehearsal time.",
        "Her dedication to research earned her international recognition.",
        "Innovation thrives in environments that encourage experimentation.",
        "The museum displayed artifacts from ancient civilizations.",
        "Curiosity drives innovation and inspires scientific breakthroughs.",
        "The forest was home to countless species of plants and animals.",
        "The astronaut described Earth as breathtaking from space.",
        "The investigation uncovered evidence that changed the entire case.",
        "The unexpected storm forced them to change their travel plans.",
        "The engineer designed a system that could operate autonomously.",
        "The long-term project required careful planning and patience.",
        "She overcame obstacles by maintaining a positive mindset.",
        "The artist used vibrant colors to convey strong emotions.",
        "They collaborated on a project that required both skill and imagination.",
        "The negotiation required careful strategy and flexibility.",
        "He discovered new talent by pushing his limitations.",
        "Communication is essential for successful teamwork.",
        "The city invested in sustainable energy solutions.",
        "Success often requires discipline and consistent effort.",
        "Despite the challenges, the community worked together to rebuild.",
        "The experiment revealed unexpected patterns in the data.",
        "Innovation drives progress across every scientific field.",
        "The professor explained the theory using simple examples.",
        "The organization provided resources to support local communities.",
        "She discovered that creativity grows with curiosity.",
        "Understanding multiple perspectives strengthens problem solving.",
        "He spent months researching the structure of the universe.",
        "The complicated puzzle challenged even advanced players.",
        "They planned a journey across the desert despite the risks.",
        "The company introduced an innovative product to the market.",
        "Her ability to remain calm under pressure impressed everyone.",
        "The library preserved documents for future generations.",
        "Achieving goals requires focus and determination.",
        "Technology evolves at an extraordinary pace.",
        "The spacecraft traveled farther than expected.",
        "The forest was home to many species of animals.",
        "He believed knowledge was the key to success.",
        "The ancient text contained valuable information.",
      ];
      /* Í≤åÏûÑ Î≥ÄÏàò */
      let currentList = [];
      let currentText = "";
      let score = 0;
      let timeLeft = 60;
      let timerInterval = null;
      let startTime = null;
      let totalTyped = 0;

      /* DOM */
      const quizText = document.getElementById("quiz-text");
      const input = document.getElementById("answer-input");
      const scoreDisplay = document.getElementById("score");
      const timerDisplay = document.getElementById("timer");
      const progressBar = document.getElementById("progress-bar");
      const wpmDisplay = document.getElementById("wpm");
      const keys = document.querySelectorAll(".key");
      const highScoreDisplay = document.getElementById("high-score");
      const restartBtn = document.getElementById("restart-btn");

      /* ÏµúÍ≥† Í∏∞Î°ù Î°úÎìú */
      let highScore = localStorage.getItem("typingHighScore") || 0;
      highScoreDisplay.textContent = highScore;

      /* ÎÇúÏù¥ÎèÑ ÏÑ†ÌÉù */
      function setMode(mode) {
        if (mode === "easy") currentList = easyWords;
        if (mode === "normal") currentList = normalWords;
        if (mode === "hard") currentList = hardSentences;

        restartGame();
      }

      /* Restart */
      function restartGame() {
        clearInterval(timerInterval);

        score = 0;
        timeLeft = 60;
        totalTyped = 0;
        startTime = new Date();

        scoreDisplay.textContent = score;
        timerDisplay.textContent = timeLeft;
        wpmDisplay.textContent = 0;

        input.disabled = false;
        input.value = "";
        input.focus();

        restartBtn.style.display = "none";

        startTimer();
        newProblem();
      }

      /* Timer */
      function startTimer() {
        timerInterval = setInterval(() => {
          timeLeft--;
          timerDisplay.textContent = timeLeft;
          progressBar.style.width = (timeLeft / 60) * 100 + "%";

          if (timeLeft <= 0) endGame();
        }, 1000);
      }

      /* End Game */
      function endGame() {
        clearInterval(timerInterval);
        quizText.textContent = "‚õî TIME OVER!";
        input.disabled = true;

        if (score > highScore) {
          highScore = score;
          localStorage.setItem("typingHighScore", highScore);
          highScoreDisplay.textContent = highScore;
        }

        restartBtn.style.display = "inline-block";
      }

      /* Î¨∏Ï†ú Ï∂úÏ†ú */
      function newProblem() {
        const r = Math.floor(Math.random() * currentList.length);
        currentText = currentList[r];
        quizText.textContent = currentText;
        input.value = "";
      }

      /* Ï†ïÎãµ Ï≤òÎ¶¨ */
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          const value = input.value.trim();

          if (value === currentText.trim()) score += 100;
          else score -= 50;

          totalTyped += value.length;

          scoreDisplay.textContent = score;
          updateWPM();
          newProblem();
        }
      });

      /* WPM Í≥ÑÏÇ∞ */
      function updateWPM() {
        const now = new Date();
        const minutes = (now - startTime) / 1000 / 60;
        const wpm = Math.round(totalTyped / 5 / minutes);
        wpmDisplay.textContent = wpm;
      }

      /* ÌÇ§Î≥¥Îìú ÎàåÎ¶º */
      document.addEventListener("keydown", (e) => {
        keys.forEach((k) => {
          if (k.textContent === e.key.toLowerCase()) k.classList.add("active");
        });
      });

      document.addEventListener("keyup", (e) => {
        keys.forEach((k) => {
          if (k.textContent === e.key.toLowerCase())
            k.classList.remove("active");
        });
      });
    </script>
  </body>
</html>
